{"Version": "2020-12-01", "Metadata": {}, "Parameters": [{"Name": "PipelineBucket", "Type": "String"}, {"Name": "PipelineProduct", "Type": "String"}, {"Name": "PipelineClientName", "Type": "String"}, {"Name": "PipelineModel", "Type": "String"}, {"Name": "ProcessingInstanceType", "Type": "String", "DefaultValue": "ml.m5.4xlarge"}, {"Name": "ProcessingInstanceVolume", "Type": "Integer", "DefaultValue": 20}], "PipelineExperimentConfig": {"ExperimentName": {"Get": "Execution.PipelineName"}, "TrialName": {"Get": "Execution.PipelineExecutionId"}}, "Steps": [{"Name": "etl-c-farmaciaschavez-mv2", "Type": "Processing", "Arguments": {"ProcessingResources": {"ClusterConfig": {"InstanceType": {"Get": "Parameters.ProcessingInstanceType"}, "InstanceCount": 1, "VolumeSizeInGB": {"Get": "Parameters.ProcessingInstanceVolume"}}}, "AppSpecification": {"ImageUri": "491940412223.dkr.ecr.us-east-1.amazonaws.com/pricelab-py310-v2:latest", "ContainerArguments": ["--bucket", {"Get": "Parameters.PipelineBucket"}, "--product", {"Get": "Parameters.PipelineProduct"}, "--cliente", {"Get": "Parameters.PipelineClientName"}, "--modelo", {"Get": "Parameters.PipelineModel"}], "ContainerEntrypoint": ["python3", "/opt/ml/processing/input/code/ETL.py"]}, "RoleArn": "arn:aws:iam::491940412223:role/service-role/AmazonSageMaker-ExecutionRole-20230714T133719", "ProcessingInputs": [{"InputName": "code", "AppManaged": false, "S3Input": {"S3Uri": "s3://pricelab-mlops-prod/c-farmaciaschavez/preprocessing/mv2/scripts/ETL.py", "LocalPath": "/opt/ml/processing/input/code", "S3DataType": "S3Prefix", "S3InputMode": "File", "S3DataDistributionType": "FullyReplicated", "S3CompressionType": "None"}}]}}, {"Name": "cleaning-c-farmaciaschavez-mv2", "Type": "Processing", "Arguments": {"ProcessingResources": {"ClusterConfig": {"InstanceType": {"Get": "Parameters.ProcessingInstanceType"}, "InstanceCount": 1, "VolumeSizeInGB": {"Get": "Parameters.ProcessingInstanceVolume"}}}, "AppSpecification": {"ImageUri": "491940412223.dkr.ecr.us-east-1.amazonaws.com/pricelab-py310-v2:latest", "ContainerArguments": ["--bucket", {"Get": "Parameters.PipelineBucket"}, "--product", {"Get": "Parameters.PipelineProduct"}, "--cliente", {"Get": "Parameters.PipelineClientName"}, "--modelo", {"Get": "Parameters.PipelineModel"}], "ContainerEntrypoint": ["python3", "/opt/ml/processing/input/code/cleaning.py"]}, "RoleArn": "arn:aws:iam::491940412223:role/service-role/AmazonSageMaker-ExecutionRole-20230714T133719", "ProcessingInputs": [{"InputName": "code", "AppManaged": false, "S3Input": {"S3Uri": "s3://pricelab-mlops-prod/c-farmaciaschavez/preprocessing/mv2/scripts/cleaning.py", "LocalPath": "/opt/ml/processing/input/code", "S3DataType": "S3Prefix", "S3InputMode": "File", "S3DataDistributionType": "FullyReplicated", "S3CompressionType": "None"}}]}, "DependsOn": ["etl-c-farmaciaschavez-mv2"]}, {"Name": "lambda-c-farmaciaschavez-mv2", "Type": "Lambda", "Arguments": {"bucket": {"Get": "Parameters.PipelineBucket"}, "client_product": {"Get": "Parameters.PipelineProduct"}, "client_name": {"Get": "Parameters.PipelineClientName"}, "model": {"Get": "Parameters.PipelineModel"}}, "DependsOn": ["cleaning-c-farmaciaschavez-mv2"], "FunctionArn": "arn:aws:lambda:us-east-1:491940412223:function:initialize-smpipeline-replica", "OutputParameters": []}]}